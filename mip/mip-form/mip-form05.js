define("mip-form/mip-form",["require","zepto","customElement","util"],function(e){function t(e){var t=e.querySelector('input[type="password"],input[type="file"]');if(t)return console.error("禁止使用password与file输入框"),!1;else return!0}function i(){var e=this.element,t=o(e),i=e.getAttribute("url"),r=e.getAttribute("method"),p=o(["<form action="+i+" method="+r+' target="_blank">',"</form>"].join(""));p.append(t.html()),t.html(p),t.find("form").on("submit",function(t){t.preventDefault(),n.call(e)}),e.addEventListener("keydown",function(e){if(13===e.keyCode)e.preventDefault(),n.call(this)},!1)}function r(e,t){return"must"===e?!(""===t):l[e.toUpperCase()].test(t)}function n(){var e=this,t=!1,i=o(e).find("input, textarea, select"),n="get"===e.getAttribute("method"),p=e.getAttribute("url"),l=p.match("http://"),m="";if(i.map(function(i,n){var p,l=n.getAttribute("validatetype"),s=n.getAttribute("validatetarget"),u=n.getAttribute("validatereg"),f=n.value;if("checkbox"==n.type||"radio"==n.type)f=n.checked?n.value:"";else if("submit"==n.type)return;if(m+="&"+n.name+"="+f,l){if(u)p=""===f?!1:new RegExp(u).test(f);else p=r(l,f);a.css(o(e).find('div[target="'+s+'"]'),{display:!p?"block":"none"}),t=!p?!0:t}}),!t)if(window.parent!==window&&l&&n){var s="";if(p.match("\\?"))s=p+m;else m=m.substring(1),s=p+"?"+m;var u={event:"mibm-jumplink",data:{url:s}};window.parent.postMessage(u,"*")}else e.getElementsByTagName("form")[0].submit()}var o=e("zepto"),p=e("customElement").create(),a=e("util"),l={EMAIL:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,PHONE:/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|17[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,IDCAR:/^\d{15}|\d{18}$/};return p.prototype.build=function(){function e(e){var t=e.target.getAttribute("name");s.parentNode.querySelector('input[name="'+t+'"]').value="",a.css(s,{display:"none"})}var r=this.element,n=r.hasAttribute("clear");if(this.cross=null,t(r))i.call(this);if(n){var o=["text","input","datetime","email","number","search","tel","url"],p="";for(var l in o)p+=",input[type="+o[l]+"]";p=p.slice(1);var m=r.querySelectorAll(p);if(!m.length)return;var s=document.createElement("div");s.id="mip-form-cross",this.cross=s;for(var u=0;u<m.length;u++){var f=m[u].offsetHeight;m[u].onfocus=function(){var e=this;if(s.setAttribute("name",e.getAttribute("name")),a.css(s,{top:e.offsetTop+(f-16)/2-8+"px",left:e.offsetWidth-32+"px"}),e.parentNode.appendChild(s),""!==e.value)a.css(s,{display:"block"});else a.css(s,{display:"none"}),e.oninput=function(){if(!(a&&a.platform&&a.platform.isAndroid()&&"search"===e.type))a.css(s,{display:""!==e.value?"block":"none"})}},m[u].onblur=function(){a.css(s,{display:"none"})}}s.addEventListener("click",e)}},p}),define("mip-form",["mip-form/mip-form"],function(e){return e}),function(){function e(e,t){e.registerMipElement("mip-form",t,"mip-form{position:relative}mip-form #mip-form-cross{position:absolute;display:block;padding:6px;width:20px;height:20px;right:0;background:url(//m.baidu.com/static/search/clear.png) no-repeat center;z-index:100;background-size:100% 100%;background-origin:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0.4);tap-highlight-color:rgba(0,0,0,0.4)}mip-form input,mip-form textarea,mip-form select{border:1px solid #f1f1f1;padding:6px;display:block;box-sizing:border-box;-webkit-box-sizing:border-box;resize:none;font-size:16px}mip-form input[type='text'],mip-form input[type='input'],mip-form input[type='datetime'],mip-form input[type='email'],mip-form input[type='number'],mip-form input[type='tel'],mip-form input[type='url']{padding-right:30px}mip-form input[type='radio']{display:inline}mip-form label{display:block}mip-form div{display:none;color:#ec1f5c;font-size:12px;text-align:left;padding:0 10% 0 3%}mip-form input[type='submit']{border:1px solid #f1f1f1;border-radius:5px;color:#333;background-color:#d8d7d7}")}if(window.MIP)require(["mip-form"],function(t){e(window.MIP,t)});else require(["mip","mip-form"],e)}();