define("mip-form/mip-form",["require","zepto","customElement","util"],function(t){function e(t){var e=t.querySelector('input[type="password"],input[type="file"]');if(e)return console.error("禁止使用password与file输入框"),!1;else return!0}function i(){var t=this.element,e=r(t),i=t.getAttribute("url"),n=t.getAttribute("method"),a=r(["<form action="+i+" method="+n+' target="_blank">',"</form>"].join(""));a.append(e.html()),e.html(a),e.find("form").on("submit",function(e){e.preventDefault(),o.call(t)}),t.addEventListener("keydown",function(t){if(13===t.keyCode)t.preventDefault(),o.call(this)},!1)}function n(t,e){return"must"===t?!(""===e):l[t.toUpperCase()].test(e)}function o(){var t=this,e=!1,i=r(t).find('input[type="text"],input[type="input"]'),o="get"===t.getAttribute("method"),a=t.getAttribute("url"),l=a.match("http://"),p="";if(i.map(function(i,o){var a,l=o.getAttribute("validatetype"),u=o.getAttribute("validatetarget"),f=o.getAttribute("validatereg"),d=o.value;if(p+="&"+o.name+"="+o.value,l){if(f)a=""===d?!1:new RegExp(f).test(d);else a=n(l,d);s.css(r(t).find('div[target="'+u+'"]'),{display:!a?"block":"none"}),e=!a?!0:e}}),!e)if(window.parent!==window){var u="";if(l&&o){if(a.match("\\?"))u=a+p;else p=p.substring(1),u=a+"?"+p;var f={event:"mibm-jumplink",data:{url:u}};window.parent.postMessage(f,"*"),console.log("post only")}else t.getElementsByTagName("form")[0].submit(),console.log("iframe https submit")}else t.getElementsByTagName("form")[0].submit(),console.log("non-iframe submit")}var r=t("zepto"),a=t("customElement").create(),s=t("util"),l={EMAIL:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,PHONE:/^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|17[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/,IDCAR:/^\d{15}|\d{18}$/};return a.prototype.build=function(){function t(t){var e=t.target.getAttribute("name");a.parentNode.querySelector('input[name="'+e+'"]').value="",s.css(a,{display:"none"}),t.preventDefault(),t.stopPropagation()}var n=this.element,o=n.hasAttribute("clear");if(this.cross=null,e(n))i.call(this);if(o){var r=n.querySelectorAll("input[type=text],input[type=input]");if(!r.length)return;var a=document.createElement("div");a.id="mip-form-cross",this.cross=a;for(var l=0;l<r.length;l++){var p=r[l].offsetHeight;r[l].onfocus=function(){var t=this;if(a.setAttribute("name",t.getAttribute("name")),s.css(a,{top:t.offsetTop+(p-16)/2-4+"px"}),t.parentNode.appendChild(a),""!==t.value)s.css(a,{display:"block"});else s.css(a,{display:"none"}),t.oninput=function(){s.css(a,{display:""!==t.value?"block":"none"})}}}a.addEventListener("touchstart",t),a.addEventListener("click",t)}},a}),define("mip-form",["mip-form/mip-form"],function(t){return t}),function(){function t(t,e){t.registerMipElement("mip-form",e,"#mip-form-cross{position:absolute;display:block;padding:4px;width:16px;height:16px;right:2%;background:url(//m.baidu.com/static/search/clear.png) no-repeat center;z-index:100;background-size:100% 100%;background-origin:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0.4);tap-highlight-color:rgba(0,0,0,0.4)}form{position:relative}input{border:1px solid #f1f1f1;padding:6px 10% 6px 3%;margin:10px auto;display:block;width:100%;box-sizing:border-box;resize:none;font-size:16px}form div{display:none;color:#ec1f5c;font-size:12px;text-align:left;padding:0 10% 0 3%}form input[type='submit']{border:1px solid #f1f1f1;border-radius:5px;color:#333;background-color:#d8d7d7}")}if(window.MIP)require(["mip-form"],function(e){t(window.MIP,e)});else require(["mip","mip-form"],t)}();